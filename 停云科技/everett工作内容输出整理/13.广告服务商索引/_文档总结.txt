物流轨迹追踪目前包括两个服务商的接口：rtbhouse和retargeting。

这两家广告服务商，在获取商品信息的时候整体逻辑相似：分为两部分，一部分是前端页面js埋点的嵌入，通过对应的埋点获取用户浏览页面的轨迹信息；另外一部分则是与我们后台进行对接，获取在售商品的相关信息。

这样通过前台后台的配合，广告商就能针对用户浏览商品的轨迹，在对应的广告联盟（一般是谷歌ad）打出我们网站商品的广告了。

以下为对应的广告商通过调用我们接口获取商品信息的接口地址：
http://api.goods.ph/api/RTBHouse.html?pageSize=100&currentPage=1
http://api.goods.ph/api/retargeting.html?pageSize=100&currentPage=1

代码位置：
/GoodsApi/src/main/java/com/goods/action/ApiController.java

对应方法：
generalRTBHouseXml();
retargeting();

基本逻辑很清楚：先根据页数和每页数量，获取对应的商品信息，然后根据对应广告服务商要求的规格，将商品信息拼接成xml文件，通过接口返回给供应商。具体的功能实现，请查阅代码和阅读对应的注释。

这里需要注意一点：retargeting.html 这个接口，目前来看是有很大问题的。不光数据请求写的冗余，导致查询速度非常慢，而且查询商品的方法有严重的错误。
他接收的pageSize假如为10，则会查询出十条product相关信息，但是展示在页面上的时候，却是这十条product对应的productsku信息。
所以假如用户请求十条数据的话，接口上真正获取到的商品数量要远远大于十条！
这边因为各种原因，还没有对个接口进行调整。万一以后还是要继续用到这个接口的话，建议对这个接口的相关部位重新编写。

前端js埋点的引入就不做过多解释了，参考广告服务商的对应文档，就知道该怎么添加进去了